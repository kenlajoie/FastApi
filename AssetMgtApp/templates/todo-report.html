 <style>
    /* Optional: Style your section */
    #todoReport {
      background-color: #f9f9f9;
      padding: 20px;
      border: 1px solid #ccc;
    }
  </style>

 {% include 'layout.html' %}

 <div class="text-center">
    <button id=printButton class="btn btn-sm btn-primary btn-thin-sm"
         onclick="printReport()" type="button">----- Print -----</button>
</div>
<div id=todoReport class="container mt-2">
  <div class="card border-dark border-3 pt-1 text-center">
        <h5 class="card-title d-flex justify-content-between mt-1 mb-0">ToDo Report <p id="todaysDate"></p></h5>
  </div>

  <div class="row" id="card-list">
    {% for todo in todos %}
      <div class="col-md-12">
        <div class="card border-dark border-3 pb-2">
         <div class="card-body">
          <div class="row g-1 pt-1">
              <div class="col-sm-4">
                Major Area: {{todo.majorArea}}
              </div> <!--col-->
              <div class="col-sm-4">
                Minor Area: {{todo.minorArea}}
              </div> <!--col-->
              <div class="col-sm-4">
                Type: {{todo.assetType}}
              </div> <!--col-->
           </div> <!--row-->
           <div class="row g-1 pt-1">
              <div class="col-sm-10">
                Description: {{todo.description}}
              </div> <!--col-->
           </div> <!--row-->
           <div class="row g-1 pt-1">
              <div class="col-sm-4">
                Model: {{todo.model}}
              </div> <!--col-->
              <div class="col-sm-4">
                State: {{todo.assetState}}
              </div> <!--col-->
           </div> <!--row-->
           <div class="row g-1 pt-1">
              <div class="col-sm-4">
                Satellite: {{todo.satellite}}
              </div> <!--col-->
              <div class="col-sm-4">
                Station: {{todo.station}}
              </div> <!--col-->
              <div class="col-sm-4">
                Distance: {{todo.distance}}
              </div> <!--col-->
           </div> <!--row-->
           <div class="row g-1 pt-1">
              <div class="col-sm-12">
                <hr style="border: 1px solid #333;  margin: 5px 0;">
              </div> <!--col-->
           </div> <!--row-->
          <div class="row g-1 pt-1">
              <div class="col-sm-8">
                <b>Title: {{ todo.title }}</b>
              </div> <!--col-->
              <div class="col-sm-3">
                <b>Status: {{ todo.todoStatus }}</b>
              </div> <!--col-->
              <div class="col-sm-1">
                    <a onclick="removeCard(this)" class="icon-link">
                        <img src="/static/img/remove_icon.png" alt="Remove">
                    </a>
              </div> <!--col-->
           </div> <!--row-->
           <div class="row g-1 pt-1">
              <div class="col-sm-12">
                <hr style="border: 1px solid #333;  margin: 5px 0;">
              </div> <!--col-->
           </div> <!--row-->

           <div class="row g-1 pt-1">
              <div class="col-sm-4">
                Assigned To: {{todo.assignedTo}}
              </div> <!--col-->
              <div class="col-sm-4">
                Priority: {{todo.priority}}
              </div> <!--col-->
           </div> <!--row-->

           <div class="row g-1 pt-1">
              <div class="col-sm-2">
                Note:
              </div> <!--col-->
              <div class="col-sm-8">
                <textarea name="note" class="auto-grow form-control" readonly>{{todo.note}}</textarea>
              </div> <!--col-->
            </div> <!--row-->
            <div class="row g-1 pt-1">
                <div class="col-sm-5">
                    Created: {{todo.createdDate}} By: {{todo.createdBy}}
                </div>
                <div class="col-sm-5">
                    Updated: {{todo.updatedDate}} By: {{todo.updatedBy}}
                </div>
            </div> <!--row-->
         </div> <!-- card-body -->
        </div> <!-- card -->
      </div> <!-- "col-md-12" -->
    {% endfor %}
  </div> <!-- card-list -->
</div> <!-- container -->

<script>

  const today = new Date();
  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
  const formattedDate = today.toLocaleDateString('en-US', options);
  document.getElementById("todaysDate").textContent = formattedDate;

  function removeCard(button) {
    // Remove the card by accessing its parent node (the card's col-sm-10 div)
    const card = button.closest('.col-md-12');
    card.remove();
  }

 function printReport() {

      var printContent = document.getElementById('todoReport').innerHTML;
      var originalContent = document.body.innerHTML;

      document.body.innerHTML = printContent;  // Replace the content with the print section

      window.print();  // Trigger the print dialog

      document.body.innerHTML = originalContent;  // Restore the original content
    }
</script>



